<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pollution Metrics - Malaysia</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .chart-container {
            width: 90%;
            margin: auto;
            margin-bottom: 50px;
        }
        h2 {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Pollution Metrics Analysis - Malaysia (2000â€“2021)</h1>

    <!-- Pollution Trends Over Time -->
    <div class="chart-container">
        <h2>Pollution Trends Over Time</h2>
        <canvas id="pollutionTrends"></canvas>
    </div>

    <!-- Pollution Breakdown by Year -->
    <div class="chart-container">
        <h2>Pollution Breakdown by Year</h2>
        <canvas id="pollutionBreakdown"></canvas>
    </div>

    <!-- Parameter-Specific Pollution Metrics -->
    <div class="chart-container">
        <h2>Parameter-Specific Pollution Metrics</h2>
        <canvas id="radarChart"></canvas>
    </div>

    <script>
        // Sample Data (Replace with your actual dataset)
        const data = {
            years: [2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021],
            bod5: {
                clean: [32.5, 48.33, 57.5, 63.33, 54.17, 52.74, 65.75, 65.73, 55.24, 19.58, 8.39, 2.14, 8.57, 0, 0, 0, 0, 37.76, 36.81, 57.64, 86.11],
                slightlyPolluted: [52.5, 34.17, 24.17, 24.17, 30.83, 28.08, 19.18, 25.87, 32.17, 51.05, 55.24, 57.14, 49.29, 32.86, 10.71, 13.57, 7.86, 25.87, 27.08, 31.94, 7.64],
                polluted: [15, 17.5, 18.33, 12.5, 15, 19.18, 15.07, 8.39, 12.59, 29.37, 36.36, 40.71, 42.14, 67.14, 89.29, 86.43, 92.14, 36.36, 36.11, 10.42, 6.25]
            },
            nh3n: {
                clean: [41.67, 44.17, 42.5, 45, 35.83, 33.56, 33.56, 33.57, 50.35, 39.16, 24.48, 29.29, 25, 29.29, 29.29, 22.86, 13.57, 3.5, 8.33, 19.44, 40.28],
                slightlyPolluted: [40, 35.83, 33.33, 30.83, 39.17, 36.99, 38.36, 41.26, 26.57, 32.87, 46.15, 45.71, 47.86, 41.43, 42.14, 46.43, 59.29, 61.54, 51.39, 51.39, 25.69],
                polluted: [18.33, 20, 24.17, 24.17, 25, 29.45, 28.08, 25.17, 23.08, 27.97, 29.37, 25, 27.14, 29.29, 28.57, 30.71, 27.14, 34.97, 40.28, 29.17, 34.03]
            },
            ss: {
                clean: [35, 47.5, 65, 62.5, 65, 61.64, 57.53, 43.36, 39.86, 37.76, 47.55, 56.43, 68.57, 75, 70.71, 76.43, 62.14, 49.65, 54.17, 76.39, 88.19],
                slightlyPolluted: [20.83, 20.83, 11.67, 14.17, 9.17, 15.07, 13.7, 27.27, 23.08, 22.38, 18.88, 18.57, 20, 17.14, 15.71, 9.29, 16.43, 21.68, 25, 9.72],
                polluted: [44.17, 31.67, 23.33, 23.33, 25.83, 23.29, 28.77, 29.37, 37.06, 39.86, 33.57, 25, 11.43, 7.86, 13.57, 14.29, 21.43, 28.67, 20.83, 13.89]
            }
        };

        // Combine slightly polluted and polluted for pollution trends
        const pollutionLevels = {
            bod5: data.bod5.slightlyPolluted.map((val, i) => val + data.bod5.polluted[i]),
            nh3n: data.nh3n.slightlyPolluted.map((val, i) => val + data.nh3n.polluted[i]),
            ss: data.ss.slightlyPolluted.map((val, i) => val + data.ss.polluted[i])
        };

        // Pollution Trends Over Time
        const ctx1 = document.getElementById('pollutionTrends').getContext('2d');
        new Chart(ctx1, {
            type: 'line',
            data: {
                labels: data.years,
                datasets: [
                    { label: 'BOD5 Pollution', data: pollutionLevels.bod5, borderColor: 'red', fill: false },
                    { label: 'NH3N Pollution', data: pollutionLevels.nh3n, borderColor: 'blue', fill: false },
                    { label: 'SS Pollution', data: pollutionLevels.ss, borderColor: 'purple', fill: false }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { x: { beginAtZero: true }, y: { beginAtZero: true } }
            }
        });

        // Pollution Breakdown by Year
        const ctx2 = document.getElementById('pollutionBreakdown').getContext('2d');
        new Chart(ctx2, {
            type: 'bar',
            data: {
                labels: data.years,
                datasets: [
                    { label: 'Clean', data: data.bod5.clean, backgroundColor: 'green' },
                    { label: 'Slightly Polluted', data: data.bod5.slightlyPolluted, backgroundColor: 'orange' },
                    { label: 'Polluted', data: data.bod5.polluted, backgroundColor: 'red' }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scales: { x: { stacked: true }, y: { stacked: true, beginAtZero: true } }
            }
        });

        // Parameter-Specific Pollution Metrics
        const ctx3 = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx3, {
            type: 'radar',
            data: {
                labels: ['BOD5', 'NH3N', 'SS'],
                datasets: [
                    {
                        label: 'Pollution Level (%)',
                        data: [
                            pollutionLevels.bod5.reduce((a, b) => a + b, 0) / pollutionLevels.bod5.length,
                            pollutionLevels.nh3n.reduce((a, b) => a + b, 0) / pollutionLevels.nh3n.length,
                            pollutionLevels.ss.reduce((a, b) => a + b, 0) / pollutionLevels.ss.length
                        ],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { position: 'top' } },
                scale: { ticks: { beginAtZero: true } }
            }
        });
    </script>
</body>
</html>